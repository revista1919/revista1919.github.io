<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <base href="/">
  
  <!-- Títulos y descripciones bilingües -->
  <title>The National Review of Sciences for Students | Revista Nacional de las Ciencias para Estudiantes</title>
  <meta name="description" content="Global peer-reviewed journal for students of all educational levels in all scientific fields. Publish, learn, and share science worldwide. | Revista científica con revisión por pares para estudiantes de todos los niveles educativos en todas las disciplinas científicas. Publica, aprende y difunde ciencia a nivel mundial.">
  
  <!-- Meta tags SEO bilingües -->
  <meta name="robots" content="index, follow">
  <meta name="keywords" content="ciencia, estudiantes, revista académica, investigación estudiantil, peer review, sciences, students, academic journal, student research, science education, educación científica">
  
  <!-- Open Graph bilingüe -->
  <meta property="og:title" content="The National Review of Sciences for Students | Revista Nacional de las Ciencias para Estudiantes">
  <meta property="og:description" content="Student-led peer-reviewed science journal for students of all educational levels | Revista científica con revisión por pares dirigida por estudiantes de todos los niveles educativos">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.revistacienciasestudiantes.com">
  <meta property="og:site_name" content="NRSS">
  <meta property="og:locale" content="es_ES">
  <meta property="og:locale:alternate" content="en_US">
  <meta property="og:image" content="https://www.revistacienciasestudiantes.com/logo.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  
  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The National Review of Sciences for Students | Revista Nacional de las Ciencias para Estudiantes">
  <meta name="twitter:description" content="Global platform for student scientific research | Plataforma global para la investigación científica estudiantil">
  <meta name="twitter:image" content="https://www.revistacienciasestudiantes.com/logo.png">
  
  <!-- Canonical y alternate para SEO bilingüe -->
  <link rel="canonical" href="https://www.revistacienciasestudiantes.com/">
  <link rel="alternate" hreflang="es" href="https://www.revistacienciasestudiantes.com/">
  <link rel="alternate" hreflang="en" href="https://www.revistacienciasestudiantes.com/en">
  <link rel="alternate" hreflang="x-default" href="https://www.revistacienciasestudiantes.com/">
  
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/logo.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  
  <!-- Theme color -->
  <meta name="theme-color" content="#52262d">
  
  <!-- Structured Data para journal académico -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Periodical",
    "name": "Revista Nacional de las Ciencias para Estudiantes",
    "alternateName": "The National Review of Sciences for Students",
    "description": "Revista académica global con revisión por pares dedicada a la investigación científica dirigida por estudiantes en todas las disciplinas. A global peer-reviewed academic journal dedicated to student-led scientific research across all disciplines.",
    "url": "https://www.revistacienciasestudiantes.com",
    "inLanguage": ["es", "en"],
    "issn": ["1234-5678"],
    "publisher": {
      "@type": "Organization",
      "name": "The National Review of Sciences for Students",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.revistacienciasestudiantes.com/logo.png"
      }
    },
    "audience": {
      "@type": "Audience",
      "audienceType": ["Students of all educational levels"],
      "geographicArea": "Global"
    }
  }
  </script>
  
  <!-- Preconnect para performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://docs.google.com">
  
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Merriweather:wght@400;700&display=swap">
  
  <!-- Preload recursos críticos -->
  <link rel="preload" href="/logo.png" as="image">
  <link rel="preload" href="/logoEN.png" as="image">
  <link rel="preload" href="/index.css" as="style">
  <link rel="preload" href="/bundle.js" as="script">
  
  <!-- CSS crítico inline -->
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { 
      margin: 0; 
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif; 
      line-height: 1.6; 
      color: #333; 
      background: linear-gradient(135deg, #f4ece7 0%, #e8d9c6 100%);
      min-height: 100vh;
      overscroll-behavior: none;
    }
    h1, h2, h3, h4 { font-family: 'Merriweather', serif; }
    .sr-only { 
      position: absolute; width: 1px; height: 1px; 
      padding: 0; margin: -1px; overflow: hidden; 
      clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; 
    }
    /* Skeleton loading */
    .skeleton { 
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    /* Loading screen styles */
    #loading {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(135deg, #f4ece7 0%, #e8d9c6 100%);
      display: flex; align-items: center; justify-content: center;
      z-index: 9999; transition: opacity 0.5s ease-out;
    }
    #loading .loading-container {
      text-align: center; 
      background: rgba(255,255,255,0.95); 
      padding: 2.5rem; 
      border-radius: 16px; 
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px); 
      border: 1px solid rgba(255,255,255,0.2);
      max-width: 320px;
      width: 90%;
      transform: translateY(0);
      animation: fadeIn 0.5s ease-out;
    }
    #loading img {
      width: 100px; height: auto; margin-bottom: 1.5rem;
      display: block; margin-left: auto; margin-right: auto;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (prefers-reduced-motion: reduce) {
      #loading .loading-container { animation: none; }
      div[style*="animation: spin"] { animation: none !important; }
    }
  </style>
  
  <!-- CSS principal -->
  <link rel="stylesheet" href="/index.css" media="print" onload="this.media='all'">
  
  <!-- PWA meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="NRSS">
</head>
<body>
  <!-- Loading indicator mejorado -->
  <div id="loading">
    <div class="loading-container">
      <img id="loading-logo" src="/logo.png" alt="NRSS Logo">
      <h2 class="loading-title" style="
        margin: 0 0 1rem 0; 
        color: #52262d; 
        font-family: 'Merriweather', serif; 
        font-size: 1.3rem; 
        font-weight: 700;
      "></h2>
      <p class="loading-desc" style="margin: 0 0 1.5rem 0; color: #666; font-size: 0.9rem; line-height: 1.4;"></p>
      <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
        <div style="
          width: 24px; height: 24px; 
          border: 2px solid #52262d; 
          border-radius: 50%; 
          border-top-color: transparent;
          animation: spin 1s ease-in-out infinite;
        "></div>
        <span class="loading-wait" style="color: #999; font-size: 0.8rem;"></span>
      </div>
    </div>
  </div>
  
  <!-- Contenedor principal -->
  <div id="root"></div>
  
  <!-- JavaScript para detección de idioma y optimizaciones -->
  <script>
    (function() {
      // Detectar idioma desde la URL
      const path = window.location.pathname;
      const isEnglish = path.startsWith('/en') || window.location.href.includes('/#/en');
      
      // Configurar atributos de idioma
      document.documentElement.lang = isEnglish ? 'en' : 'es';
      document.documentElement.dir = 'ltr';
      
      // Añadir clases CSS para estilizado específico
      document.body.classList.add(isEnglish ? 'lang-en' : 'lang-es');
      
      // Cambiar logo según idioma
      const logoSrc = isEnglish ? '/logoEN.png' : '/logo.png';
      document.getElementById('loading-logo').src = logoSrc;
      
      // Configurar textos de loading basados en idioma
      const texts = {
        es: {
          title: 'Revista Nacional de las Ciencias para Estudiantes',
          desc: 'Cargando contenido científico para estudiantes en todo el mundo...',
          wait: 'Por favor espere'
        },
        en: {
          title: 'The National Review of Sciences for Students',
          desc: 'Loading scientific content for students worldwide...',
          wait: 'Please wait'
        }
      };
      const lang = isEnglish ? 'en' : 'es';
      document.querySelector('.loading-title').textContent = texts[lang].title;
      document.querySelector('.loading-desc').textContent = texts[lang].desc;
      document.querySelector('.loading-wait').textContent = texts[lang].wait;
      
      // Optimización de prerenderizado
      const hideLoading = () => {
        const loading = document.getElementById('loading');
        if (loading) {
          loading.style.opacity = '0';
          setTimeout(() => {
            loading.remove();
          }, 500);
        }
      };
      
      // Observar cambios en el DOM para detectar renderizado de React
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
            setTimeout(hideLoading, 800);
            observer.disconnect();
          }
        });
      });
      
      observer.observe(document.getElementById('root'), {
        childList: true,
        subtree: true
      });
      
      // Fallback: ocultar después de 5 segundos
      setTimeout(hideLoading, 5000);
      
      // Animación del spinner y estilos adicionales
      const style = document.createElement('style');
      style.textContent = `
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        .lang-en, .lang-es { --primary-font: 'Roboto', sans-serif; }
        /* Lazy-loaded images */
        img[loading="lazy"] {
          opacity: 0;
          transition: opacity 0.3s ease-in;
        }
        img[loading="lazy"].loaded {
          opacity: 1;
        }
      `;
      document.head.appendChild(style);
      
      // Lazy loading para imágenes
      document.addEventListener('DOMContentLoaded', () => {
        const images = document.querySelectorAll('img[loading="lazy"]');
        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.classList.add('loaded');
              observer.unobserve(img);
            }
          });
        }, { rootMargin: '200px' });
        images.forEach(img => observer.observe(img));
      });
      
      // Marcar como listo para prerenderizado
      window.prerenderReady = true;
      document.documentElement.setAttribute('data-prerender-ready', 'true');
      
      // Optimización de performance
      window.addEventListener('load', () => {
        // Priorizar recursos críticos
        const criticalScripts = document.createElement('link');
        criticalScripts.rel = 'preload';
        criticalScripts.href = '/bundle.js';
        criticalScripts.as = 'script';
        document.head.appendChild(criticalScripts);
        
        // Habilitar compresión de imágenes
        document.querySelectorAll('img').forEach(img => {
          if (!img.hasAttribute('loading')) {
            img.setAttribute('loading', 'lazy');
            img.setAttribute('decoding', 'async');
          }
        });
      });
      
      // Soporte para tema oscuro
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      const applyTheme = () => {
        if (prefersDark.matches) {
          document.documentElement.setAttribute('data-theme', 'dark');
          document.body.style.background = 'linear-gradient(135deg, #2c1e22 0%, #3e2f35 100%)';
        }
      };
      applyTheme();
      prefersDark.addEventListener('change', applyTheme);
    })();
  </script>
  
  <!-- Service Worker para PWA -->
  <script>
    if ('serviceWorker' in navigator && location.hostname !== 'localhost') {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registered'))
          .catch(err => console.log('Service Worker failed:', err));
      });
    }
  </script>
</body>
</html>